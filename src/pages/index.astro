---
import Layout from "../layouts/Layout.astro";
import Pushable from "../components/Pushable.astro";
import "../styles/index.scss";
import fetchWPData from "../data/data.js";
import ReactComponent from "../components/ReactComponent";

const posts = await fetchWPData();
---

<Layout title="Home">
  <div class="flex md:flex-col p-12 gap-12">
    <section class="latests w-2/3 md:w-full">
      <h3 class="text-red-600">Latest Articles</h3>
      <div class="flex flex-col gap-6">
        {posts.map((post) => {
          const title = post.title.rendered.slice(9);
          const { slug } = post;
          const excerpt = post.uagb_excerpt.slice(0, -8);
          return (
            <div class="post-excerpt">
              <h4><a href={`/${slug}`}>
                {title}
              </a></h4>
              <p>{excerpt}</p>
              <Pushable slug={slug} />
            </div>
          );
        })}
      </div>
    </section>
    <section class="pops w-1/3 md:w-full">
      <h3 class="text-red-600 text-center">Most Viewed</h3>
      {posts.map((post) => {
          const title = post.title.rendered.slice(9);
          const { slug } = post;
          return (
            <h4 class="flex items-center"><span class="text-blue-600 p-4">âžœ</span> <a href={slug}>{title}</a></h4>
          );
        })}
    </section>
  </div>
</Layout>
